<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Q-Switched Pulse Energy Calculator</title>
<link rel="icon" type="image/x-icon" href="assets/jekicon.png">
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<style>
  html, body {
    margin: 0; height: 100%; background-color: #e4cbb7;
    font-family: Arial, sans-serif; color: white;
  }
  body { display: flex; flex-direction: column; }
  .top-container { width:100%; display:flex; flex-direction:column; height:8vh; position:relative; z-index:10; }
  .bar { flex:1; } 
  .bar1{background:#ffb347;} 
  .bar2{background:#f47742;} 
  .bar3{background:#db3550;} 
  .bar4{background:#73b9ca;} 
  .bar5{background:#0092b2;}
  .bar6 { background:#2f1b41; display:flex; align-items:center; justify-content:center; font-size:1.5vh; padding:0 10px; flex-wrap:wrap; }
  .bar6 a { color:white; text-decoration:none; margin:0 5px; }
  .bar6 a:hover { text-decoration:underline; }
  .text-overlay { position:absolute; top:0; left:0; width:100%; height:8vh; display:flex; justify-content:center; align-items:center; font-size:3vh; font-weight:bold; pointer-events:none; z-index:20; }
  .main-content { flex:1; overflow-y:auto; padding:2rem; box-sizing:border-box; color:#2f1b41; display:flex; flex-direction:column; align-items:center; justify-content:flex-start; }
  .page-title { font-weight:bold; font-size:2rem; color:#2f1b41; margin-bottom:2rem; text-align:center; }
  .calc-grid { display:flex; gap:1rem; justify-content:center; width:100%; max-width:850px; flex-wrap:wrap; }
  .calc-card, .diagram-area { background: rgba(255,255,255,0.66); border-radius:12px; padding:20px; color:#2f1b41; display:flex; flex-direction:column; gap:12px; min-width:240px; max-width:280px; box-sizing:border-box; }
  .calc-card input, .calc-card select { padding:6px; font-size:0.95rem; border-radius:5px; border:2px solid #2f1b41; background:#fff; color:#2f1b41; width:120px; }
  .calc-card button { background-color:#2f1b41; color:white; border:none; cursor:pointer; padding:8px; border-radius:5px; transition:0.3s; }
  .calc-card button:hover { background-color:#3c2756; }
  .eq-grid { display:flex; flex-direction:row; gap:40px; justify-content:center; width:100%; align-items:stretch; }
  .eq-column { display:flex; flex-direction:column; gap:10px; flex:1; text-align:center; align-items:center; }
  .eq-box { background: rgba(255,255,255,0.25); border-radius:12px; padding:10px; font-size:1rem; display:flex; justify-content:center; align-items:center; width:100%; }
  .param-box-wrapper { display:flex; justify-content:center; width:100%; margin-top:10px; }
  .param-box { background: rgba(255,255,255,0.25); border-radius:12px; padding:10px; font-size:0.9rem; line-height:1.4; text-align:center; display:flex; flex-direction:column; max-width:400px; width:90%; }
  footer { width:100%; padding:20px 0; box-sizing:border-box; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:8px; }
  footer .bottom-image { height:8vh; width:auto; max-width:30vw; }
  footer .copyright { font-size:1rem; color:#2f1b41; text-align:center; }
  .input-row { display:flex; gap:6px; align-items:center; }
</style>
</head>
<body>

<div class="top-container">
  <div class="bar bar1"></div><div class="bar bar2"></div><div class="bar bar3"></div>
  <div class="bar bar4"></div><div class="bar bar5"></div>
  <div class="bar6">
    <a href="../Products.html">Products</a> |
    <a href="calculators.html">Calculators</a> |
    <a href="../Bio.html">Bio</a> |
    <a href="../Contact.html">Contact</a>
  </div>
  <div class="text-overlay">EJEKT</div>
</div>

<main class="main-content">
  <h1 class="page-title">Q-Switched Pulse Energy Calculator</h1>

  <div class="calc-grid">

    <div class="calc-card">
      <label>Average Power</label>
      <div class="input-row">
        <input type="number" id="avg-power" step="0.01"/>
        <select id="power-prefix">
          <option value="1">W</option>
          <option value="1e-3">mW</option>
          <option value="1e-6">µW</option>
        </select>
      </div>

      <label>Repetition Rate</label>
      <div class="input-row">
        <input type="number" id="rep-rate" step="1"/>
        <select id="rep-prefix">
          <option value="1">Hz</option>
          <option value="1e3">kHz</option>
          <option value="1e6">MHz</option>
          <option value="1e9">GHz</option>
          <option value="1e12">THz</option>
        </select>
      </div>

      <button onclick="calculatePulseEnergy()">Calculate</button>
    </div>

    <div class="diagram-area">
      <div class="eq-grid">
        <div class="eq-column">
          <!-- Static equation -->
          <div class="eq-box" id="static-equation">\(E_{\rm pulse} = \frac{P_{\rm avg}}{f_{\rm rep}}\)</div>
          <!-- Dynamic result -->
          <div class="eq-box" id="pulse-energy-result">\(E_{\rm pulse} = ?\)</div>
        </div>
      </div>

      <div class="param-box-wrapper">
        <div class="param-box">
          <strong>Parameter Key:</strong>
          <span>\(P_{\rm avg}\) = Average Power</span>
          <span>\(f_{\rm rep}\) = Repetition Rate</span>
          <span>\(E_{\rm pulse}\) = Pulse Energy</span>
        </div>
      </div>
    </div>
  </div>
</main>

<footer>
  <a href="../index.html"><img src="../jek.png" alt="Company Logo" class="bottom-image" /></a>
  <span class="copyright">© 2025 EJEKT</span>
</footer>

<script>
function calculatePulseEnergy() {
  let P_avg = parseFloat(document.getElementById('avg-power').value);
  const powerPrefix = parseFloat(document.getElementById('power-prefix').value);
  let f_rep = parseFloat(document.getElementById('rep-rate').value);
  const repPrefix = parseFloat(document.getElementById('rep-prefix').value);

  if (!P_avg || P_avg <= 0 || !f_rep || f_rep <= 0) {
    alert("Please enter valid positive numbers for power and repetition rate.");
    return;
  }

  // Apply prefix scaling
  P_avg *= powerPrefix;
  f_rep *= repPrefix;

  const E_pulse = P_avg / f_rep;

  let displayValue = E_pulse;
  let unit = "J";

  if (E_pulse < 1e-6) { displayValue *= 1e9; unit = "nJ"; }
  else if (E_pulse < 1e-3) { displayValue *= 1e6; unit = "µJ"; }
  else if (E_pulse < 1) { displayValue *= 1e3; unit = "mJ"; }

  // Use innerHTML with \( ... \) for inline MathJax parsing
  document.getElementById('pulse-energy-result').innerHTML =
    `\\(E_{\\rm pulse} = ${displayValue.toFixed(3)}\\,${unit}\\)`;

  MathJax.typesetPromise();
}
</script>

</body>
</html>

